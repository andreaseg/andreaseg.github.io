(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ "../lift_wasm/pkg/lift_wasm.js":
/*!*************************************!*\
  !*** ../lift_wasm/pkg/lift_wasm.js ***!
  \*************************************/
/*! exports provided: emergency_stop, stop_lift_at_floor, step_simulation, last_simulation_result, time_to_floor, SimulationResult, __wbindgen_throw */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lift_wasm_bg.wasm */ \"../lift_wasm/pkg/lift_wasm_bg.wasm\");\n/* harmony import */ var _lift_wasm_bg_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lift_wasm_bg.js */ \"../lift_wasm/pkg/lift_wasm_bg.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"emergency_stop\", function() { return _lift_wasm_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"emergency_stop\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"stop_lift_at_floor\", function() { return _lift_wasm_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"stop_lift_at_floor\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"step_simulation\", function() { return _lift_wasm_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"step_simulation\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"last_simulation_result\", function() { return _lift_wasm_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"last_simulation_result\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"time_to_floor\", function() { return _lift_wasm_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"time_to_floor\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SimulationResult\", function() { return _lift_wasm_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"SimulationResult\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_throw\", function() { return _lift_wasm_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"__wbindgen_throw\"]; });\n\n\n\n\n//# sourceURL=webpack:///../lift_wasm/pkg/lift_wasm.js?");

/***/ }),

/***/ "../lift_wasm/pkg/lift_wasm_bg.js":
/*!****************************************!*\
  !*** ../lift_wasm/pkg/lift_wasm_bg.js ***!
  \****************************************/
/*! exports provided: emergency_stop, stop_lift_at_floor, step_simulation, last_simulation_result, time_to_floor, SimulationResult, __wbindgen_throw */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"emergency_stop\", function() { return emergency_stop; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"stop_lift_at_floor\", function() { return stop_lift_at_floor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"step_simulation\", function() { return step_simulation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"last_simulation_result\", function() { return last_simulation_result; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"time_to_floor\", function() { return time_to_floor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SimulationResult\", function() { return SimulationResult; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_throw\", function() { return __wbindgen_throw; });\n/* harmony import */ var _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lift_wasm_bg.wasm */ \"../lift_wasm/pkg/lift_wasm_bg.wasm\");\n\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer) {\n        cachegetUint8Memory0 = new Uint8Array(_lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n/**\n* @param {boolean} status\n*/\nfunction emergency_stop(status) {\n    _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"emergency_stop\"](status);\n}\n\n/**\n* @param {number} floor\n*/\nfunction stop_lift_at_floor(floor) {\n    _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"stop_lift_at_floor\"](floor);\n}\n\n/**\n* Step the simulation by the time as specified in 'time_step'\n* Returns true if the lift is still moving and false if its stopped\n* @param {number} time_step\n* @returns {SimulationResult}\n*/\nfunction step_simulation(time_step) {\n    var ret = _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"step_simulation\"](time_step);\n    return SimulationResult.__wrap(ret);\n}\n\n/**\n* @returns {SimulationResult}\n*/\nfunction last_simulation_result() {\n    var ret = _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"last_simulation_result\"]();\n    return SimulationResult.__wrap(ret);\n}\n\nlet cachegetInt32Memory0 = null;\nfunction getInt32Memory0() {\n    if (cachegetInt32Memory0 === null || cachegetInt32Memory0.buffer !== _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer) {\n        cachegetInt32Memory0 = new Int32Array(_lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer);\n    }\n    return cachegetInt32Memory0;\n}\n\nlet cachegetFloat32Memory0 = null;\nfunction getFloat32Memory0() {\n    if (cachegetFloat32Memory0 === null || cachegetFloat32Memory0.buffer !== _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer) {\n        cachegetFloat32Memory0 = new Float32Array(_lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer);\n    }\n    return cachegetFloat32Memory0;\n}\n/**\n* @param {number} floor\n* @param {number} average_stop\n* @returns {number | undefined}\n*/\nfunction time_to_floor(floor, average_stop) {\n    try {\n        const retptr = _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_add_to_stack_pointer\"](-16);\n        _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"time_to_floor\"](retptr, floor, average_stop);\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getFloat32Memory0()[retptr / 4 + 1];\n        return r0 === 0 ? undefined : r1;\n    } finally {\n        _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_add_to_stack_pointer\"](16);\n    }\n}\n\n/**\n*/\nclass SimulationResult {\n\n    static __wrap(ptr) {\n        const obj = Object.create(SimulationResult.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_simulationresult_free\"](ptr);\n    }\n    /**\n    * @returns {number}\n    */\n    get position() {\n        var ret = _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_get_simulationresult_position\"](this.ptr);\n        return ret;\n    }\n    /**\n    * @param {number} arg0\n    */\n    set position(arg0) {\n        _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_set_simulationresult_position\"](this.ptr, arg0);\n    }\n    /**\n    * @returns {boolean}\n    */\n    get is_stopped() {\n        var ret = _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_get_simulationresult_is_stopped\"](this.ptr);\n        return ret !== 0;\n    }\n    /**\n    * @param {boolean} arg0\n    */\n    set is_stopped(arg0) {\n        _lift_wasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_set_simulationresult_is_stopped\"](this.ptr, arg0);\n    }\n}\n\nconst __wbindgen_throw = function(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../www/node_modules/webpack/buildin/harmony-module.js */ \"./node_modules/webpack/buildin/harmony-module.js\")(module)))\n\n//# sourceURL=webpack:///../lift_wasm/pkg/lift_wasm_bg.js?");

/***/ }),

/***/ "../lift_wasm/pkg/lift_wasm_bg.wasm":
/*!******************************************!*\
  !*** ../lift_wasm/pkg/lift_wasm_bg.wasm ***!
  \******************************************/
/*! exports provided: memory, __wbg_simulationresult_free, __wbg_get_simulationresult_position, __wbg_set_simulationresult_position, __wbg_get_simulationresult_is_stopped, __wbg_set_simulationresult_is_stopped, emergency_stop, stop_lift_at_floor, step_simulation, last_simulation_result, time_to_floor, __wbindgen_add_to_stack_pointer */
/***/ (function(module, exports, __webpack_require__) {

eval("\"use strict\";\n// Instantiate WebAssembly module\nvar wasmExports = __webpack_require__.w[module.i];\n__webpack_require__.r(exports);\n// export exports from WebAssembly module\nfor(var name in wasmExports) if(name != \"__webpack_init__\") exports[name] = wasmExports[name];\n// exec imports from WebAssembly module (for esm order)\n/* harmony import */ var m0 = __webpack_require__(/*! ./lift_wasm_bg.js */ \"../lift_wasm/pkg/lift_wasm_bg.js\");\n\n\n// exec wasm module\nwasmExports[\"__webpack_init__\"]()\n\n//# sourceURL=webpack:///../lift_wasm/pkg/lift_wasm_bg.wasm?");

/***/ }),

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var lift_wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lift-wasm */ \"../lift_wasm/pkg/lift_wasm.js\");\n\r\n\r\nconst canvas = document.getElementById(\"lift-canvas\");\r\nlet isStopped = false;\r\nlet timeStopped = 0;\r\n\r\n\r\nconst toggledFloors = [];\r\n\r\nlet lastTimestamp;\r\nconst mainLoop = (timestamp) => {\r\n    if (lastTimestamp === undefined) {\r\n        lastTimestamp = timestamp;\r\n    }\r\n    const timeStep = (timestamp - lastTimestamp) / 1000.0;\r\n\r\n    let lift;\r\n    if (!isStopped || timeStopped > 1) {\r\n        lift = lift_wasm__WEBPACK_IMPORTED_MODULE_0__[\"step_simulation\"](timeStep);\r\n        isStopped = lift.is_stopped;\r\n        let floor = Math.round(lift.position);\r\n        if (toggledFloors.includes(floor)) {\r\n            toggleFloorIndicator(floor, false);\r\n        }\r\n        timeStopped = 0;\r\n    } else {\r\n        lift = lift_wasm__WEBPACK_IMPORTED_MODULE_0__[\"last_simulation_result\"]();\r\n        timeStopped += timeStep;\r\n    }\r\n\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    \r\n\r\n    const liftHeight = canvas.height / 13;\r\n\r\n    ctx.strokeStyle = \"#AAA\";\r\n    for (let i = 1; i < 13; i++) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, i * liftHeight);\r\n        ctx.lineTo(canvas.width, i * liftHeight);\r\n        ctx.stroke(); \r\n    }\r\n\r\n    const liftOffset = liftHeight * 3;\r\n    ctx.fillStyle = \"#AdA425\";\r\n    ctx.fillRect(0, canvas.height - lift.position * liftHeight - liftOffset, canvas.width, liftHeight);\r\n\r\n    toggledFloors.forEach(floor => {\r\n        const timer = \"floor-button-timer-\" + floor;\r\n        const remainingTime = lift_wasm__WEBPACK_IMPORTED_MODULE_0__[\"time_to_floor\"](floor, 1.0);\r\n        if (remainingTime !== undefined && remainingTime > 0) {\r\n            document.getElementById(timer).innerText =  remainingTime.toFixed(1) + \"s\";\r\n        }\r\n    });\r\n\r\n    lastTimestamp = timestamp;\r\n    window.requestAnimationFrame(mainLoop);\r\n};\r\n\r\nconst floorButtons = Array.from(document.getElementsByClassName(\"floor-button\"));\r\nconst emergencyStopButton = document.getElementById(\"emergency-stop-button\");\r\n\r\nlet emergencyStopStatus = false;\r\nemergencyStopButton.addEventListener(\"click\", () => {\r\n    console.log(\"Emergency stop button pressed\");\r\n    emergencyStopStatus = !emergencyStopStatus;\r\n    lift_wasm__WEBPACK_IMPORTED_MODULE_0__[\"emergency_stop\"](emergencyStopStatus);\r\n    if (emergencyStopStatus) {\r\n        emergencyStopButton.classList.add(\"active-floor-button\");\r\n    } else {\r\n        emergencyStopButton.classList.remove(\"active-floor-button\");\r\n    }\r\n});\r\n\r\nfloorButtons.forEach(button => {\r\n    button.addEventListener(\"click\", () => {\r\n        const floor = button.value;\r\n        console.log(\"Floor button \" + floor + \" pressed\")\r\n        lift_wasm__WEBPACK_IMPORTED_MODULE_0__[\"stop_lift_at_floor\"](button.value);\r\n        toggleFloorIndicator(floor, true);\r\n    });\r\n    \r\n});\r\n\r\n\r\nconst toggleFloorIndicator = (value, status) => {\r\n    floorButtons\r\n        .filter(button => button.value == value)\r\n        .forEach(button => {\r\n            const active = \"active-floor-button\";\r\n            \r\n            if (status) {\r\n                button.classList.add(active);\r\n                toggledFloors.push(parseInt(value));\r\n            } else {\r\n                button.classList.remove(active);\r\n                while (toggledFloors.includes(value)) {\r\n                    const index = toggledFloors.indexOf(value);\r\n                    if (index > -1) {\r\n                        toggledFloors.splice(index, 1);\r\n                    }\r\n                }\r\n                const timer = \"floor-button-timer-\" + value;\r\n                document.getElementById(timer).innerText = \"\";\r\n            }\r\n            \r\n    });\r\n}\r\n\r\n\r\nwindow.requestAnimationFrame(mainLoop);\n\n//# sourceURL=webpack:///./index.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/harmony-module.js":
/*!*******************************************!*\
  !*** (webpack)/buildin/harmony-module.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n//# sourceURL=webpack:///(webpack)/buildin/harmony-module.js?");

/***/ })

}]);